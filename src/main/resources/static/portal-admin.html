<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
    <link rel="stylesheet" href="estructure.css">
    <link rel="stylesheet" href="portal-admin.css">
</head>
<body>
    <aside>
        <a class="user__container" href="usuario-admin.html">
            <div class="avatar">
                <ion-icon class="user__icon" name="person-sharp"></ion-icon>
            </div>
            Supervisor
        </a>
        <div class="nav__container">
            <a class="section" href="portal-admin.html">
                <ion-icon name="bar-chart-outline"></ion-icon>
                Estadísticas
            </a>
            <a class="section" href="agregar-misiones.html">
                <ion-icon name="add-circle-outline"></ion-icon>
                Gestionar Misiones
            </a>
            <a class="section" href="agregar-empleado.html">
                <ion-icon name="person-add-outline"></ion-icon>
                Gestionar Empleados
            </a>
        </div>
        <div>
            <a class="section logout" href="index.html">
                <ion-icon name="log-out-outline"></ion-icon>
                Cerrar Sesión
            </a>
        </div>
    </aside>
    <main>
        <section>
            <h2>Lista de Empleados</h2>
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Puesto</th>
                    <th>Correo</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                <!-- Aquí se insertarán los empleados dinámicamente -->
                </tbody>
            </table>
        </section>
        <section>
            <h2>Estadísticas</h2>
            <p>Aquí se mostrarán los gráficos de desempeño y análisis de datos.</p>
            <div style="height:350px; background:#ecf0f1; border-radius:10px; display:flex; justify-content:center; align-items:center;">
                <em style="color: #7f8c8d; font-size:1.2em;">Gráficos en construcción...</em>
            </div>
        </section>
    </main>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const tablaEmpleados = document.getElementById("tabla-empleados"); // id de tu tbody

            fetch("http://localhost:8085/api/empleados")
                .then(response => response.json())
                .then(data => {
                    tablaEmpleados.innerHTML = ""; // limpia lo que había antes

                    data.forEach(emp => {
                        const fila = `
          <tr>
            <td>${emp.idEmpleado}</td>
            <td>${emp.nombre}</td>
            <td>${emp.apellido}</td>
            <td>${emp.correoEmpresarial}</td>
            <td>${emp.puesto}</td>
          </tr>
        `;
                        tablaEmpleados.insertAdjacentHTML("beforeend", fila);
                    });
                })
                .catch(error => console.error("Error al cargar empleados:", error));
        });
    </script>
</body>
</html>